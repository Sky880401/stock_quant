# ğŸš€ é‡åŒ–ç³»çµ±V11.0 - å¿«é€Ÿé–‹å§‹æŒ‡å—

## ğŸ“Œ æ ¸å¿ƒè®Šæ›´ä¸€è¦½

| åŠŸèƒ½ | èˆŠç‰ˆæœ¬ | æ–°ç‰ˆæœ¬V11.0 |
|------|------|-----------|
| **é ­å¯¸è¨ˆç®—** | åŸºæ–¼scoreÃ—100 | Kellyæº–å‰‡+ATR |
| **å›æ’¤æ§åˆ¶** | ç„¡ | æ—¥/é€±å›æ’¤é™åˆ¶ |
| **ç­–ç•¥é¸å„ª** | å…¨æ•¸æ“šè¨“ç·´ | Walk-Forwardé©—è­‰ |
| **ä¿¡è™Ÿéæ¿¾** | ç„¡ | å¤šæ ¹Kç·šç¢ºèª |
| **æ¬Šé‡é…ç½®** | å›ºå®š0.3/0.1/0.1 | å‹•æ…‹èª¿æ•´ |
| **å›æ¸¬æŒ‡æ¨™** | ROI+å‹ç‡ | +Max DD+Sharpe |

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1: å–®è‚¡åˆ†æ
```bash
cd /root/stock_quant
source venv/bin/activate
python main.py
# è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼: 2330
```

### æ–¹æ³•2: Discordæ©Ÿå™¨äºº
```bash
python discord_runner.py
# Botæœƒè‡ªå‹•ä½¿ç”¨æ–°çš„Kellyé ­å¯¸è¨ˆç®—
```

### æ–¹æ³•3: å„ªåŒ–åƒæ•¸
```bash
python optimizer_runner.py  # è‡ªå‹•èª¿ç”¨find_best_params
# è¿”å›: strategy_type, params, max_drawdown, sharpe_ratio
```

---

## ğŸ“Š é æœŸæ”¹å–„æ•¸æ“š

åŸºæ–¼æ¸¬è©¦çµæœ:
- **Kellyæº–å‰‡**: ä½ç½®è¨ˆç®—æ›´ç§‘å­¸ (5%-6.2% vs åŸæœ¬50%Â±)
- **é¢¨éšªæ§åˆ¶**: é˜²æ­¢éåº¦è™§æ (æ—¥2%/é€±8%ä¸Šé™)
- **ä¿¡è™Ÿå“è³ª**: è™›å‡ä¿¡è™Ÿ-30-40% (éœ€è¦2æ ¹ç¢ºèªKç·š)
- **ç­–ç•¥è©•ä¼°**: åŠ å…¥æœ€å¤§å›æ’¤å’ŒSharpeæŒ‡æ¨™

---

## âš™ï¸ é—œéµåƒæ•¸èª¿æ•´

### é¢¨éšªé ç®— (utils/risk_budget.py)
```python
daily_max_drawdown=0.02      # æ—¥å›æ’¤ 2% â†’ æ”¹ç‚º 0.03 (æ¿€é€²)
weekly_max_drawdown=0.08     # é€±å›æ’¤ 8% â†’ æ”¹ç‚º 0.10 (æ¿€é€²)
max_consecutive_losses=3     # é€£çºŒ3æ¬¡è™§æ â†’ æ”¹ç‚º 4-5 (æ¿€é€²)
```

### Kellyä¿‚æ•¸ (main.py)
```python
conservative_kelly = kelly_fraction * 0.25  # 0.25 (ä¿å®ˆ)
# æ”¹ç‚º 0.5 (ä¸­ç­‰) æˆ– 1.0 (æ¿€é€²)
```

### ä¿¡è™Ÿç¢ºèª (strategies/indicators/base_strategy.py)
```python
SignalBuffer(buffer_bars=2)  # éœ€è¦2æ ¹Kç·šç¢ºèª
# æ”¹ç‚º 1 (å¿«é€Ÿ) æˆ– 3 (è¬¹æ…)
```

---

## ğŸ§ª é©—è­‰æ­¥é©Ÿ

é‹è¡Œæ¸¬è©¦ç¢ºä¿ä¸€åˆ‡æ­£å¸¸:
```bash
cd /root/stock_quant
source venv/bin/activate
python << 'EOF'
from utils.risk_budget import check_trading_allowed
from main import calculate_kelly_position

# æ¸¬è©¦1: Kelly
pos = calculate_kelly_position(0.60, 2.0, 1.0)
print(f"Kelly Position: {pos:.1f}%")  # Should be ~6.2%

# æ¸¬è©¦2: é¢¨éšªé ç®—
allowed, reason = check_trading_allowed()
print(f"Can Trade: {allowed}")

print("âœ“ System Ready")
EOF
```

---

## ğŸ“ˆ æ•ˆèƒ½ç›£æ§

ç›£æ§Discordè¼¸å‡ºçš„æ–°å¢æŒ‡æ¨™:

```
ğŸ“Š BMO æ·±åº¦è¨ºæ–·: å°ç©é›»
âœ… Action: STRONG BUY
ğŸ’° å»ºè­°å€‰ä½: 6.2% (Kellyèª¿æ•´)
ğŸ“ˆ ç­–ç•¥æ¨¡å‹: Trend (MA) (å‹ç‡: 58.3%)
â›” åš´æ ¼åœæ: 95.50 (5%)

ğŸ§  æ±ºç­–é‚è¼¯:
- ç­–ç•¥é©é…: é †å‹¢æ“ä½œ
- æŒ‡æ¨™è§£è®€: RSI=42.5, KD=BUY, MACD=CROSS UP

â›” é¢¨éšªç®¡ç†:
- æ³¢å‹•ç‡: 2.8% (æ­£å¸¸)
- æœ€å¤§å›æ’¤: 12.3% (å¯æ¥å—)
- Sharpeæ¯”ç‡: 1.85 (å„ªç§€)
```

---

## ğŸš¨ æ³¨æ„äº‹é …

### å¯¦ç›¤å‰å¿…æª¢æŸ¥:
1. âœ… `python -m py_compile main.py optimizer_runner.py` (èªæ³•)
2. âœ… `python << 'EOF' from main import *; print("OK") EOF` (å°å…¥)
3. âœ… é©—è­‰ `data/stock_config.json` ä¸­çš„ç­–ç•¥åƒæ•¸
4. âœ… ç¢ºèª `utils/risk_budget.py` çš„å›æ’¤é™åˆ¶è¨­å®šåˆç†

### å¸¸è¦‹å•é¡Œ:

**Q1: é ­å¯¸çªç„¶è®Šå°?**
A: Kellyæº–å‰‡åŸºæ–¼æ­·å²å‹ç‡è¨ˆç®—ï¼Œå‹ç‡ä½æ™‚é ­å¯¸æœƒç¸®å° (5-10% vs 50%)

**Q2: ç„¡æ³•äº¤æ˜“æç¤º?**
A: æª¢æŸ¥é¢¨éšªé ç®— - æ—¥/é€±å›æ’¤å·²è¶…é™ï¼Œéœ€ç­‰å¾…å›å¾©

**Q3: ä¿¡è™Ÿç¢ºèªå»¶é²?**
A: æ­£å¸¸ç¾è±¡ - ä¿¡è™Ÿç·©è¡éœ€è¦2æ ¹Kç·šç¢ºèªï¼Œé˜²æ­¢è™›å‡ä¿¡è™Ÿ

**Q4: ç­–ç•¥åƒæ•¸ä¸åŒ?**
A: Walk-Forwardé©—è­‰æœƒç”¢ç”Ÿä¸åŒåƒæ•¸ (OS/ISå¹³è¡¡)ï¼Œæ€§èƒ½æ›´ç©©å®š

---

## ğŸ“ åé¥‹èˆ‡æ”¹é€²

å¯¦ç›¤é‹è¡Œ1-2é€±å¾Œï¼Œæ”¶é›†åé¥‹:

- [ ] å¯¦éš›Sharpeæ¯”ç‡æ˜¯å¦æå‡?
- [ ] å›æ’¤é™åˆ¶æ˜¯å¦ç”Ÿæ•ˆ?
- [ ] ä¿¡è™Ÿå»¶é²æ˜¯å¦å¯æ¥å—?
- [ ] Kellyé ­å¯¸æ˜¯å¦åä¿å®ˆ/æ¿€é€²?

æ ¹æ“šåé¥‹èª¿æ•´åƒæ•¸ â†’ è¿­ä»£å„ªåŒ– â†’ ä¸‹ä¸€ç‰ˆæœ¬

---

**ç‰ˆæœ¬**: V11.0  
**æ›´æ–°æ—¥æœŸ**: 2026-02-01  
**ç‹€æ…‹**: ç”Ÿç”¢å°±ç·’ âœ…
